"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var StaffMembers=function(_BaseComponent){_inherits(StaffMembers,_BaseComponent);function StaffMembers(props){_classCallCheck(this,StaffMembers);var _this=_possibleConstructorReturn(this,(StaffMembers.__proto__||Object.getPrototypeOf(StaffMembers)).call(this,props));_this.state={seeAll:false};_this.seeAll=_this.seeAll.bind(_this);return _this}_createClass(StaffMembers,[{key:"componentDidMount",value:function componentDidMount(){$(".StaffMembers").find(".content-wrapper").css("max-height",$(".staff-member:first-child").height())}},{key:"componentDidUpdate",value:function componentDidUpdate(){$(".StaffMembers").find(".content-wrapper").css("max-height",this.state.seeAll?"100%":$(".staff-member:first-child").height());if(!this.state.seeAll){document.getElementById("venue-staff").scrollIntoView()}}},{key:"_ratingStarClass",value:function _ratingStarClass(value){var fullStar=new Array(Math.floor(value+1)).join('<div class="icon icon-star-full active"></div>');var halfStar=value%1!==0?'<div class="icon-extended icon-half-star-icon active"></div>':"";var noStar=new Array(Math.floor(5+1-value)).join('<div class="icon icon-star-empty active"></div>');return fullStar+halfStar+noStar}},{key:"_numberFormat",value:function _numberFormat(number,decimals,dec_point,thousands_sep){number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=typeof thousands_sep==="undefined"?",":thousands_sep,dec=typeof dec_point==="undefined"?".":dec_point,s="",toFixedFix=function toFixedFix(n,prec){var k=Math.pow(10,prec);return""+Math.round(n*k)/k};s=(prec?toFixedFix(n,prec):""+Math.round(n)).split(".");if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)}if((s[1]||"").length<prec){s[1]=s[1]||"";s[1]+=new Array(prec-s[1].length+1).join("0")}return s.join(dec)}},{key:"seeAll",value:function seeAll(){this.setState({seeAll:!this.state.seeAll})}},{key:"render",value:function render(){var _this2=this;var contentWrapperClassNames=classNames({"content-wrapper":true,"is-opened":this.state.seeAll,"is-closed":!this.state.seeAll});var showMoreStaffmemberClassNames=classNames({"show-more-staffmember":true,hide:this.props.staffMembers.length<5&&window.innerWidth>480});return React.createElement("div",{className:"StaffMembers"},React.createElement("div",{className:contentWrapperClassNames},this.props.staffMembers.map(function(staff){return React.createElement("div",{key:staff.id,className:"staff-member"},React.createElement("div",{className:"staff-profile"},React.createElement("img",{src:staff.avatar,alt:staff.name+" "+staff.surname}),React.createElement("div",{className:"profile-data"},React.createElement("span",null,staff.name),React.createElement("span",null,staff.role))),React.createElement("div",{className:"staff-rating"},React.createElement("div",{className:"rating-value"},_this2._numberFormat(staff.rating,1,","),React.createElement("sup",null,"/5")),React.createElement("div",{className:"rating-count"},React.createElement("span",null,staff.votes),React.createElement("span",null,"Â ",_this2.props.translation.voti)),React.createElement("div",{className:"rating-header"},React.createElement("div",{className:"stars",dangerouslySetInnerHTML:{__html:_this2._ratingStarClass(staff.rating)}}))),React.createElement("div",{className:"staff-treatments"},staff.top_treatments.map(function(treatment){return React.createElement("div",{key:treatment.id,className:"staff-treatment-rating"},React.createElement("div",{className:"treatment-name",title:treatment.venue_treatment_name},treatment.venue_treatment_name),React.createElement("div",{className:"rating-count"},treatment.reviews_count),React.createElement("div",{className:"rating-header"},React.createElement("div",{className:"stars",dangerouslySetInnerHTML:{__html:_this2._ratingStarClass(treatment.avg_rating)}})))})))})),React.createElement("div",{className:showMoreStaffmemberClassNames,onClick:this.seeAll},!this.state.seeAll?this.props.translation.vediTuttoLoStaff:this.props.translation.nascondiLoStaff))}}]);return StaffMembers}(BaseComponent);StaffMembers.propTypes={staffMembers:React.PropTypes.array.isRequired,translation:React.PropTypes.object.isRequired};